var express = require('express');
var things = require('./things.js');
var con = require('./db.js');

var app = express();

app.use(express.static("public"));
app.use('/things', things);

app.set('view engine', 'ejs');
app.set('views', './public/views');

app.get('/', function (req, res) {
    res.render('index', {
        heading: "Shailesh First Static Post",
        subheading: "static data using ejs and express js",
    });
});

app.get('/dynamic', function (req, res) {
    //res.render('dynamic', {
    //    heading: "Shailesh First Post",
    //    subheading: "dynamic data using ejs and express js",
    //    users: [
    //        { name: "Shailesh", mobile: "7709616270", email: "shaileshm@imtsolutions.net" },
    //        { name: "Priyanka", mobile: "7709616260", email: "priyankaj@imtsolutions.net" }
    //    ]
    //});
    con.query('SELECT * FROM user',
       function (err, result) {
           if (err) throw err;
           res.render('dynamic', {
               heading: "List of users",
               subheading: "dynamic data using ejs and express js",
               users: result
           });
       });
});


//app.get('*', function (req, res) {
//    res.send('Sorry, this is an invalid URL.');
//});

//app.set('view engine', 'pug');
//app.set('views', './views');

//app.get('/first_template', function (req, res) {
//    res.render('first_view');
//});
//app.set('view engine', 'pug');
//app.set('views', './views');

//app.get('/first_template', function (req, res) {
//    res.render('first_view');
//});

//app.get('/dynamic_view', function (req, res) {
//    res.render('dynamic', {
//        heading: "Shailesh First Post",
//        subheading: "dynamic data using pug and express js",
//        user: [
//            { name: "Shailesh", mobile: "7709616270", email: "shaileshm@imtsolutions.net" },
//            { name: "Priyanka", mobile: "7709616260", email: "priyankaj@imtsolutions.net" }
//        ]
//    });
//});

app.listen(2000);